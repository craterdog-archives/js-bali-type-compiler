[
    $procedure: {
        receive $message from /acme/messages/inbound/v1.2.3
        reject message
        receive messages[$foo, 5] from /acme/messages/outbound/v2.3.4
        accept message
    }
    $instructions: "
        1.ReceiveStatement:
        PUSH LITERAL `/acme/messages/inbound/v1.2.3`
        SAVE VARIABLE $bag-2
        LOAD MESSAGE $bag-2
        SAVE VARIABLE $message
        
        2.RejectStatement:
        ---- Save the message to be rejected.
        LOAD VARIABLE $message
        SAVE VARIABLE $message-3
        ---- Extract and save the name of the message bag.
        LOAD VARIABLE $message-3
        PUSH LITERAL `$bag`
        CALL $keyValue WITH 2 ARGUMENTS
        SAVE VARIABLE $bag-4
        ---- Extract and save the version string for the message.
        LOAD VARIABLE $message-3
        PUSH LITERAL `$version`
        CALL $parameter WITH 2 ARGUMENTS
        CALL $nextVersion WITH 1 ARGUMENT
        SAVE VARIABLE $version-5
        ---- Set the new version string parameter for the message.
        LOAD VARIABLE $message-3
        PUSH LITERAL `$version`
        LOAD VARIABLE $version-5
        CALL $setParameter WITH 3 ARGUMENTS
        ---- Post the new version of the message to the named message bag.
        LOAD VARIABLE $message-3
        SAVE MESSAGE $bag-4
        
        3.ReceiveStatement:
        ---- Place the recipient and the index of its subcomponent on the stack.
        LOAD VARIABLE $messages
        PUSH LITERAL `$foo`
        CALL $subcomponent WITH 2 ARGUMENTS
        PUSH LITERAL `5`
        ---- Assign the result as the value of the subcomponent.
        PUSH LITERAL `/acme/messages/outbound/v2.3.4`
        SAVE VARIABLE $bag-6
        LOAD MESSAGE $bag-6
        CALL $setSubcomponent WITH 3 ARGUMENTS
        
        4.AcceptStatement:
        ---- Save the message to be accepted.
        LOAD VARIABLE $message
        SAVE VARIABLE $message-7
        ---- Extract and save the name of the message bag.
        LOAD VARIABLE $message-7
        PUSH LITERAL `$bag`
        CALL $keyValue WITH 2 ARGUMENTS
        SAVE VARIABLE $bag-8
        ---- Drop the message from the named message bag.
        LOAD VARIABLE $message-7
        DROP MESSAGE $bag-8
        LOAD VARIABLE $result-1
        PULL RESULT
    "($mediaType: "application/basm")
    $addresses: [
        "1.ReceiveStatement": 1
        "2.RejectStatement": 5
        "3.ReceiveStatement": 22
        "4.AcceptStatement": 30
    ]
    $bytecode: '
        28018001680180056005800660062802D04D800260062803D060C85B800A
        60062803600AD8826006880260082805D08B2806280780036803D8836005
        800760072802D04D80046007A80460095000
    '(
        $encoding: $base16
        $mediaType: "application/bcod"
    )
    $arguments: [
        $target
    ]
    $variables: [
        $bag-2
        $bag-4
        $bag-6
        $bag-8
        $message
        $message-3
        $message-7
        $messages
        $result-1
        $version-5
    ]($type: /bali/collections/Set/v1)
    $messages: [ ]($type: /bali/collections/Set/v1)
]

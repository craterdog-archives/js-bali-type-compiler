1.QueueStatement:
PUSH HANDLER 1.QueueStatementHandlers
PUSH ELEMENT `<bali:/queues/myqueue>`
EXECUTE $asReference ON TARGET
STORE VARIABLE $$queue-1
LOAD VARIABLE $message
STORE MESSAGE $$queue-1

1.QueueStatementDone:
POP HANDLER
JUMP TO 1.QueueStatementSucceeded

1.QueueStatementHandlers:
SKIP INSTRUCTION

1.1.HandleClause:
STORE VARIABLE $error
LOAD VARIABLE $error
LOAD VARIABLE $error
INVOKE $catalog
PUSH ELEMENT `$type`
PUSH ELEMENT `"bad"`
INVOKE $setValue WITH 3 PARAMETERS
INVOKE $matches WITH 2 PARAMETERS
JUMP TO 1.2.HandleClause ON FALSE
POP COMPONENT

1.1.1.EvaluateStatement:
PUSH ELEMENT `any`
STORE VARIABLE $$result

1.1.HandleClauseDone:
JUMP TO 1.QueueStatementSucceeded

1.2.HandleClause:
STORE VARIABLE $error
LOAD VARIABLE $error
LOAD VARIABLE $error
INVOKE $catalog
PUSH ELEMENT `$type`
PUSH ELEMENT `"horrid"`
INVOKE $setValue WITH 3 PARAMETERS
INVOKE $matches WITH 2 PARAMETERS
JUMP TO 1.QueueStatementFailed ON FALSE
POP COMPONENT

1.2.1.EvaluateStatement:
PUSH ELEMENT `none`
STORE VARIABLE $$result

1.2.HandleClauseDone:
JUMP TO 1.QueueStatementSucceeded

1.QueueStatementFailed:
HANDLE EXCEPTION

1.QueueStatementSucceeded:
LOAD VARIABLE $$result
HANDLE RESULT

[
    $literals: [
        "peg A"
        $type
        $Stack(
            $Number($range: [1..infinity])
        )
        $Number($range: [1..infinity])
        $range
        1
        infinity
        "peg B"
        "peg C"
        $pegs
        $steps
        "Move disk {disk} from {fromPeg} to {toPeg}."
    ]
    $constants: [:]
    $procedures: [
        $play: [
            $parameters: []
            $variables: [
                $$iterator-1
                $$result
                $n
                $numberOfDisks
                $target
            ]
            $procedures: [
                $asCatalog
                $asSequential
                $getNext
                $hasNext
                $iterator
                $moveTower
                $push
            ]
            $addresses: [
                "1.EvaluateStatement": 1
                "2.EvaluateStatement": 69
                "3.WithStatement": 71
                "3.1.ConditionClause": 77
                "3.1.1.EvaluateStatement": 83
                "3.ConditionRepeat": 95
                "3.WithStatementDone": 96
                "4.EvaluateStatement": 97
                "5.ReturnStatement": 110
            ]
            $instructions: "
                1.EvaluateStatement:
                INVOKE $catalog
                PUSH LITERAL `"peg A"`
                INVOKE $list
                INVOKE $catalog
                PUSH LITERAL `$type`
                PUSH LITERAL `$Stack(
                    $Number($range: [1..infinity])
                )`
                INVOKE $list
                PUSH LITERAL `$Number($range: [1..infinity])`
                INVOKE $catalog
                PUSH LITERAL `$range`
                PUSH LITERAL `1`
                PUSH LITERAL `infinity`
                INVOKE $range WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                PUSH LITERAL `"peg B"`
                INVOKE $list
                INVOKE $catalog
                PUSH LITERAL `$type`
                PUSH LITERAL `$Stack(
                    $Number($range: [1..infinity])
                )`
                INVOKE $list
                PUSH LITERAL `$Number($range: [1..infinity])`
                INVOKE $catalog
                PUSH LITERAL `$range`
                PUSH LITERAL `1`
                PUSH LITERAL `infinity`
                INVOKE $range WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                PUSH LITERAL `"peg C"`
                INVOKE $list
                INVOKE $catalog
                PUSH LITERAL `$type`
                PUSH LITERAL `$Stack(
                    $Number($range: [1..infinity])
                )`
                INVOKE $list
                PUSH LITERAL `$Number($range: [1..infinity])`
                INVOKE $catalog
                PUSH LITERAL `$range`
                PUSH LITERAL `1`
                PUSH LITERAL `infinity`
                INVOKE $range WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                INVOKE $setParameters WITH 2 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                INVOKE $setValue WITH 3 PARAMETERS
                
                2.EvaluateStatement:
                INVOKE $list
                INVOKE $setValue WITH 3 PARAMETERS
                
                3.WithStatement:
                LOAD VARIABLE $numberOfDisks
                PUSH LITERAL `1`
                INVOKE $range WITH 2 PARAMETERS
                EXECUTE $asSequential ON TARGET
                EXECUTE $iterator ON TARGET
                STORE VARIABLE $$iterator-1
                
                3.1.ConditionClause:
                LOAD VARIABLE $$iterator-1
                EXECUTE $hasNext ON TARGET
                JUMP TO 3.WithStatementDone ON FALSE
                LOAD VARIABLE $$iterator-1
                EXECUTE $getNext ON TARGET
                STORE VARIABLE $n
                
                3.1.1.EvaluateStatement:
                LOAD VARIABLE $target
                EXECUTE $asSequential ON TARGET
                PUSH LITERAL `$pegs`
                INVOKE $getValue WITH 2 PARAMETERS
                PUSH LITERAL `"peg A"`
                INVOKE $getValue WITH 2 PARAMETERS
                INVOKE $list
                LOAD VARIABLE $n
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $push ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                3.ConditionRepeat:
                JUMP TO 3.1.ConditionClause
                
                3.WithStatementDone:
                SKIP INSTRUCTION
                
                4.EvaluateStatement:
                LOAD VARIABLE $target
                INVOKE $list
                LOAD VARIABLE $numberOfDisks
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH LITERAL `"peg A"`
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH LITERAL `"peg C"`
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH LITERAL `"peg B"`
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $moveTower ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                5.ReturnStatement:
                LOAD VARIABLE $target
                EXECUTE $asSequential ON TARGET
                PUSH LITERAL `$steps`
                INVOKE $getValue WITH 2 PARAMETERS
                EXECUTE $asCatalog ON TARGET
                HANDLE RESULT
            "(
                $mediatype: "application/basm"
            )
            $bytecode: '
                FFFF2801FFFFFFFF28022803FFFF2804FFFF280528062807FFFFB830FFFF
                B02FB018FFFFB02FB830FFFFB02FB8302808FFFFFFFF28022803FFFF2804
                FFFF280528062807FFFFB830FFFFB02FB018FFFFB02FB830FFFFB02FB830
                2809FFFFFFFF28022803FFFF2804FFFF280528062807FFFFB830FFFFB02F
                B018FFFFB02FB830FFFFB02FB830B830FFFFB83060042806FFFFD002D005
                80016001D00418606001D00380036005D002280AB0212801B021FFFF6003
                B018FFFFD8078002004D00006005FFFF6004B0182801B0182809B0182808
                B018FFFFD80680026005D002280BB021D001E800
            '(
                $base: 16
                $mediatype: "application/bcod"
            )
        ]
        $moveTower: [
            $parameters: [
                $height
                $fromPeg
                $toPeg
                $withPeg
            ]
            $variables: [$$result, $target]
            $procedures: [
                $asBoolean
                $asNumeric
                $moveDisk
                $moveTower
            ]
            $addresses: [
                "1.IfStatement": 1
                "1.1.ConditionClause": 2
                "1.1.1.EvaluateStatement": 5
                "1.1.2.EvaluateStatement": 22
                "1.1.3.EvaluateStatement": 31
                "1.IfStatementDone": 48
            ]
            $instructions: "
                1.IfStatement:
                SKIP INSTRUCTION
                
                1.1.ConditionClause:
                PUSH PARAMETER $height
                EXECUTE $asBoolean ON TARGET
                JUMP TO 1.IfStatementDone ON FALSE
                
                1.1.1.EvaluateStatement:
                LOAD VARIABLE $target
                INVOKE $list
                PUSH PARAMETER $height
                EXECUTE $asNumeric ON TARGET
                PUSH LITERAL `1`
                EXECUTE $asNumeric ON TARGET
                INVOKE $difference WITH 2 PARAMETERS
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $fromPeg
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $withPeg
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $toPeg
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $moveTower ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                1.1.2.EvaluateStatement:
                LOAD VARIABLE $target
                INVOKE $list
                PUSH PARAMETER $fromPeg
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $toPeg
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $moveDisk ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                1.1.3.EvaluateStatement:
                LOAD VARIABLE $target
                INVOKE $list
                PUSH PARAMETER $height
                EXECUTE $asNumeric ON TARGET
                PUSH LITERAL `1`
                EXECUTE $asNumeric ON TARGET
                INVOKE $difference WITH 2 PARAMETERS
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $withPeg
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $toPeg
                INVOKE $addItem WITH 2 PARAMETERS
                PUSH PARAMETER $fromPeg
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $moveTower ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                1.IfStatementDone:
                LOAD VARIABLE $$result
                HANDLE RESULT
            "(
                $mediatype: "application/basm"
            )
            $bytecode: '
                00003801D00118306002FFFF3801D0022806D002B01DB0183802B0183804
                B0183803B018FFFFD80480016002FFFF3802B0183803B018FFFFD8038001
                6002FFFF3801D0022806D002B01DB0183804B0183803B0183802B018FFFF
                D80480016001E800
            '(
                $base: 16
                $mediatype: "application/bcod"
            )
        ]
        $moveDisk: [
            $parameters: [$fromPeg, $toPeg]
            $variables: [
                $$result
                $disk
                $target
            ]
            $procedures: [
                $append
                $asSequential
                $pop
                $push
            ]
            $addresses: [
                "1.EvaluateStatement": 1
                "2.EvaluateStatement": 9
                "3.EvaluateStatement": 21
            ]
            $instructions: "
                1.EvaluateStatement:
                LOAD VARIABLE $target
                EXECUTE $asSequential ON TARGET
                PUSH LITERAL `$pegs`
                INVOKE $getValue WITH 2 PARAMETERS
                PUSH PARAMETER $fromPeg
                INVOKE $getValue WITH 2 PARAMETERS
                EXECUTE $pop ON TARGET
                STORE VARIABLE $disk
                
                2.EvaluateStatement:
                LOAD VARIABLE $target
                EXECUTE $asSequential ON TARGET
                PUSH LITERAL `$pegs`
                INVOKE $getValue WITH 2 PARAMETERS
                PUSH PARAMETER $toPeg
                INVOKE $getValue WITH 2 PARAMETERS
                INVOKE $list
                LOAD VARIABLE $disk
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $push ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                
                3.EvaluateStatement:
                LOAD VARIABLE $target
                EXECUTE $asSequential ON TARGET
                PUSH LITERAL `$steps`
                INVOKE $getValue WITH 2 PARAMETERS
                INVOKE $list
                PUSH LITERAL `"Move disk {disk} from {fromPeg} to {toPeg}."`
                INVOKE $addItem WITH 2 PARAMETERS
                INVOKE $parameters WITH PARAMETER
                EXECUTE $append ON TARGET WITH PARAMETERS
                STORE VARIABLE $$result
                LOAD VARIABLE $$result
                HANDLE RESULT
            "(
                $mediatype: "application/basm"
            )
            $bytecode: '
                6003D002280AB0213801B021D00380026003D002280AB0213802B021FFFF
                6002B018FFFFD80480016003D002280BB021FFFF280CB018FFFFD8018001
                6001E800
            '(
                $base: 16
                $mediatype: "application/bcod"
            )
        ]
    ]
]
